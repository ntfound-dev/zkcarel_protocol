# ENV Runtime Audit (MVP)

Snapshot audit dari env aktif:
- `backend-rust/.env`
- `frontend/.env.local`

Tanggal audit: 2026-02-26 (local).

## Backend Split

### Active MVP (dipakai flow frontend/backend utama)
- `STARKNET_SWAP_CONTRACT_ADDRESS`
- `BRIDGE_AGGREGATOR_ADDRESS`
- `LIMIT_ORDER_BOOK_ADDRESS`
- `STAKING_CAREL_ADDRESS`
- `STAKING_STABLECOIN_ADDRESS`
- `STAKING_BTC_ADDRESS`
- `DISCOUNT_SOULBOUND_ADDRESS`
- `AI_EXECUTOR_ADDRESS`
- `ZK_PRIVACY_ROUTER_ADDRESS`
- `PRIVATE_ACTION_EXECUTOR_ADDRESS`
- `CAREL_TOKEN_ADDRESS`
- `POINT_STORAGE_ADDRESS`
- `SNAPSHOT_DISTRIBUTOR_ADDRESS`
- `PRICE_ORACLE_ADDRESS`
- `HIDE_BALANCE_EXECUTOR_KIND=shielded_pool_v2`

### Backend-only optional (deployed, tidak dipakai frontend saat ini)
- `PRIVATE_BTC_SWAP_ADDRESS`
- `DARK_POOL_ADDRESS`
- `PRIVATE_PAYMENTS_ADDRESS`
- `ANONYMOUS_CREDENTIALS_ADDRESS`
- `BATTLESHIP_GARAGA_ADDRESS`

### Script-only / prover tooling
- `GARAGA_PRECOMPUTED_PAYLOAD_PATH`
- `GARAGA_ALLOW_PRECOMPUTED_PAYLOAD`
- `GARAGA_DYNAMIC_BINDING`
- `GARAGA_PROVE_CMD`
- `GARAGA_VK_PATH`
- `GARAGA_PROOF_PATH`
- `GARAGA_PUBLIC_INPUTS_PATH`
- `GARAGA_TIMEOUT_SECS`
- `GARAGA_UVX_CMD`

### Currently unused by backend runtime
- `FAUCET_WALLET_PRIVATE_KEY`
- `INDEXER_DIAGNOSTICS`

Catatan:
- `RUST_LOG` tetap dipakai secara implicit oleh tracing (`EnvFilter::try_from_default_env`).

## Frontend Split

### Active MVP (dipakai langsung di code)
- `NEXT_PUBLIC_BACKEND_URL`
- `NEXT_PUBLIC_BACKEND_WS_URL`
- `NEXT_PUBLIC_STARKNET_SWAP_CONTRACT_ADDRESS`
- `NEXT_PUBLIC_STARKNET_BRIDGE_AGGREGATOR_ADDRESS`
- `NEXT_PUBLIC_STARKNET_LIMIT_ORDER_BOOK_ADDRESS`
- `NEXT_PUBLIC_STARKNET_AI_EXECUTOR_ADDRESS`
- `NEXT_PUBLIC_STARKNET_STAKING_BTC_ADDRESS`
- `NEXT_PUBLIC_STARKNET_DISCOUNT_SOULBOUND_ADDRESS`
- `NEXT_PUBLIC_ZK_PRIVACY_ROUTER_ADDRESS`
- `NEXT_PUBLIC_PRIVATE_ACTION_EXECUTOR_ADDRESS`
- `NEXT_PUBLIC_HIDE_BALANCE_EXECUTOR_KIND`
- `NEXT_PUBLIC_HIDE_BALANCE_RELAYER_POOL_ENABLED`
- `NEXT_PUBLIC_HIDE_BALANCE_RELAYER_POOL_LIMIT_ENABLED`
- `NEXT_PUBLIC_TOKEN_CAREL_ADDRESS`
- `NEXT_PUBLIC_TOKEN_STRK_ADDRESS`
- `NEXT_PUBLIC_TOKEN_USDT_ADDRESS`
- `NEXT_PUBLIC_TOKEN_USDC_ADDRESS`
- `NEXT_PUBLIC_TOKEN_BTC_ADDRESS`
- `NEXT_PUBLIC_TOKEN_WBTC_ADDRESS`
- `NEXT_PUBLIC_BTC_VAULT_ADDRESS`

### Fallback from `frontend/.env`
- `NEXT_PUBLIC_STARKNET_STAKING_CAREL_ADDRESS`
- `NEXT_PUBLIC_STARKNET_STAKING_STABLECOIN_ADDRESS`

Dua key di atas dipakai runtime, tetapi pada snapshot ini nilainya diambil dari `frontend/.env` karena belum diisi di `.env.local`.

### Legacy alias optional
- `NEXT_PUBLIC_LIMIT_ORDER_BOOK_ADDRESS`
- `NEXT_PUBLIC_STAKING_BTC_ADDRESS`
- `NEXT_PUBLIC_AI_EXECUTOR_ADDRESS`
- `NEXT_PUBLIC_DISCOUNT_SOULBOUND_ADDRESS`

Alias ini kompatibilitas saja; jika key `NEXT_PUBLIC_STARKNET_*` sudah ada, alias tidak wajib.

## Address Alignment Check (FE/BE)

Hasil alignment utama:
- `STARKNET_SWAP_CONTRACT_ADDRESS` == `NEXT_PUBLIC_STARKNET_SWAP_CONTRACT_ADDRESS` (MATCH)
- `BRIDGE_AGGREGATOR_ADDRESS` == `NEXT_PUBLIC_STARKNET_BRIDGE_AGGREGATOR_ADDRESS` (MATCH)
- `LIMIT_ORDER_BOOK_ADDRESS` == `NEXT_PUBLIC_STARKNET_LIMIT_ORDER_BOOK_ADDRESS` (MATCH)
- `AI_EXECUTOR_ADDRESS` == `NEXT_PUBLIC_STARKNET_AI_EXECUTOR_ADDRESS` (MATCH)
- `ZK_PRIVACY_ROUTER_ADDRESS` == `NEXT_PUBLIC_ZK_PRIVACY_ROUTER_ADDRESS` (MATCH)
- `PRIVATE_ACTION_EXECUTOR_ADDRESS` == `NEXT_PUBLIC_PRIVATE_ACTION_EXECUTOR_ADDRESS` (MATCH)

## Architecture Impact

Karena scope MVP aktif:
- `DarkPool` dan `PrivateBTCSwap` tidak dimasukkan dalam diagram arsitektur MVP aktif.
- Keduanya tetap dicatat sebagai deployed optional (backend-only) untuk mencegah kebingungan scope.
